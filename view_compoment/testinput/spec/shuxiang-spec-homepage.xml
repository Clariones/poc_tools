<?xml version="1.0" encoding="UTF-8"?>
<root xmlns:c="http://clariones.doublechaintech.com/uischema.xml" template="mobile">
	<!-- 首页 -->
	<c:page name="customer-home-page" title="书香社区">
		<c:data-source user="$(customer)" />
		<c:data-source shop="$(store)" />

		<c:row name="header-bar" link-to-url="/wxaService/storeList/" class="padding--default">
				<c:text class="text-title" data-source="$(shop.store_name)"></c:text>
				<c:text class="text-title text--color-highlight">&lt;切换&gt;</c:text>
			<!-- 搜索功能暂时没用 <c:container class="container-horizontal align-right"> <c:search api-url="/wxaService/searchInHomePage/">搜索</c:search> 
				</c:container> -->
		</c:row>
		<c:container class="container--empty"></c:container>
		
		<c:carousel name="ad-block" data-source="$(shop.store_slide)" data-source-link="$(wxa_link_url)"
			data-source-image="$(banner_image)" data-source-tips="$(tips)">
			<c:image
				src-url="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTL0zJ2f6DwWOw6xkuc16pDAyxfGv5_udkV1c0VbAUctmFULbbD" />
			<c:image
				src-url="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQY2RLztnCf306MdR4wm9RUTJy2r0HHc0c3HY2oQyjXLUR9nBZ9" />
			<c:image src-url="https://i0.hdslb.com/bfs/article/4486e9c92b7add273a5b55f86a816d0603c1313f.jpg" />
		</c:carousel>
		<c:container class="container--empty"></c:container>
		
		<c:row class="padding--default text--size-middle align-both-ends" name="action-bar">
			<c:column class="icon-item" link-to-url="/wxaService/wantBorrowBook/scanCode/">
				<c:image src-url="/images/borrowBook.png" class="image--size-icon" />
				<c:text>借书</c:text>
			</c:column>
			<c:column class="icon-item" link-to-url="/wxaService/wantBuyBook/">
				<c:image src-url="/images/buyBook.png" class="image--size-icon" />
				<c:text>买书</c:text>
			</c:column>
			<c:column class="icon-item" link-to-url="/wxaService/wantShareBook/$(shop.id)/">
				<c:image src-url="/images/shareBook.png" class="image--size-icon" />
				<c:text>共享</c:text>
			</c:column>
			<c:column class="icon-item" link-to-url="/wxaService/myMessageList/">
				<c:image src-url="/images/myMessages.png" class="image--size-icon" />
				<c:text>提醒</c:text>
			</c:column>
		</c:row>
		<c:container class="container--empty"></c:container>
		
		<c:row class="padding--default align-both-ends text-title" name="campagin-header">
			<c:text class="flex--0">活动</c:text>
			<c:row link-to-url="./wxaService/storeCampaignList/$(shop.id)/" class="flex--0 text--color-highlight">
				<c:text>更多</c:text>
				<c:font-icon>caret-right</c:font-icon>
			</c:row>
		</c:row>
		<c:column>
			<c:row data-source="$(shop.campaign)" link-to-url="/wxaService/campaignDetail/$(id)/" class="padding--default border--bottom">
				<c:column class="flex--5-2">
					<c:image src-url="$(campaign_image)"></c:image>
					<c:text class="text--color-highlight pin-to-left-top background--float-tag"
						data-source="$(campaign_status)">状态</c:text>
				</c:column>
				<c:column class="flex--5-3 padding--left-default" name="campaign-info-block">
					<c:text class="text--size-middle text--color-default" data-source="$(campaign_name)">标题</c:text>
					<c:row class="text--size-default text--color-info" >
						<c:date name="campaign-hold-time" data-source="$(campaign_start_time)" format="yyyy-MM-dd HH:mm">时间</c:date>
						<c:text>~</c:text>
						<c:date name="campaign-finish-time" data-source="$(campaign_finish_time)" format="HH:mm">时间</c:date>
					</c:row>
					<c:text class="text--size-default text--color-info" data-source="$(campaign_hold_address)" format="2,...,12">地点</c:text>
					<c:row class="align-both-ends">
						<c:text name="register-info" class="text--color-highlight" data-source="$(_by_key_reg_cnt)/$(available_register_quantity)人" ></c:text>
						<c:container class="container--tag-mark">
							<c:text>立即报名</c:text>
						</c:container>
					</c:row>
				</c:column>
			</c:row>
		</c:column>
	</c:page>

	<!-- 首页：切换门店 -->
	<c:page name="customer-store-list" title="切换门店">
        <c:data-source user="$(customer)"/>
        <c:data-source plateform="$(book_sharing_platform)"/>
        <!-- 
        <c:row class="align-center flat-bar background-main">
        	<c:text class="text-size-section-title text-color-marked-main">附近的门店</c:text>
        </c:row>
         -->
        <c:column>
        	<c:row class="padding--default border--bottom" name="store-info-block" link-to-url="/wxaService/selectStore/$(id)/" data-source="$(plateform.store)">
        		<c:column class="flex--5-2">
        			<c:image src-url="$(store_image)"></c:image>
        		</c:column>
        		<c:column name="store-desc-block" class="container-full flex--5-3 margin--left-default">
        			<c:text class="text-title" data-source="$(store_name)">名称</c:text>
        			<c:row class="padding--top-near">
        				<c:font-icon>clock-o</c:font-icon>
        				<c:text class="text--color-info" data-source="$(store_open_time)">营业时间</c:text>
        			</c:row>
        			<c:row class="align-both-ends">
	        			<c:row class="flex--0">
	        				<c:font-icon>map-marker</c:font-icon>
	        				<c:text class="text--color-info" data-source="$(store_address) $(store_room_number)">地址</c:text>
        				</c:row>
        				<c:row class="flex--0">
			        		<c:text name="store-distance" class="text--color-highlight" data-source="$(_by_key_distance)">距离</c:text>
	        			</c:row>
        			</c:row>
        		</c:column>
        	</c:row>
        </c:column>
    </c:page>
    
    <!-- 首页：借书 -->
    <c:page name="customer-borrow-book" title="借书">
        <c:data-source user="$(customer)"/>
		<c:data-source totalCanBorrow="var: int"/>
		<c:data-source alreadyBorrowed="var: int"/>
		<c:data-source leftBorrowCount="var: int"/>
		<c:data-source allowedAmountLimit="var: object"/>
		<c:data-source alreadyBorrowedAmount="var: object"/>
		<c:data-source leftBorrowedAmount="var: object"/>
		
		<c:column name="can-borrow" class="align-center borrow-book-page">
			<c:text data-source="当前已借$(alreadyBorrowed)本书"></c:text>
			<c:text data-source="还可借$(leftBorrowCount)本书"></c:text>
			<c:bar_or_qr_code name="my-code" class="image-size-main padding--top-far padding--bottom-far" data-source="$(user.id)">我的二维码</c:bar_or_qr_code>
			<c:text class="text--size-small text--color-info padding--bottom-far">请向门店员工出示借书码进行借书</c:text>
			<c:button type="scanner" class="btn btn--green btn--half" link-to-url="/wxaService/customerBorrowBook/">自助扫码借书</c:button>
		</c:column>
		
		<c:column name="no-member-service" class="align-center borrow-book-page">
			<c:text>您未购买会员服务</c:text>
			<c:text>借书请购买会员服务</c:text>
			<c:image class="can-not-borrow-image padding--top-far padding--bottom-far" src-url="/images/can_not_borrow_book.png"></c:image>
			<c:button class="btn btn--green btn--half" link-to-url="/wxaService/customerMemberService/">查看会员服务</c:button>
		</c:column>
		
		<c:column name="member-service-expire" class="align-center borrow-book-page">
			<c:text>您的会员服务已过期</c:text>
			<c:text>借书请继续购买会员服务</c:text>
			<c:image class="can-not-borrow-image padding--top-far padding--bottom-far" src-url="/images/can_not_borrow_book.png"></c:image>
			<c:button class="btn btn--green btn--half" link-to-url="/wxaService/customerMemberService/">查看会员服务</c:button>
		</c:column>
		
		<c:column name="number-limit" class="align-center borrow-book-page">
			<c:text>您已借满$(totalCanBorrow)本书</c:text>
			<c:image class="can-not-borrow-image padding--top-far padding--bottom-far" src-url="/images/can_not_borrow_book.png"></c:image>
			<c:button class="btn btn--green btn--half" link-to-url="/wxaService/customerBorrowHistory/">查看借阅详情</c:button>
		</c:column>
		
		<c:column name="ammount-limit" class="align-center borrow-book-page">
			<c:money data-source="$(allowedAmountLimit)" format="您所借图书已经超过#,###.##元"/>
			<c:image class="can-not-borrow-image padding--top-far padding--bottom-far" src-url="/images/can_not_borrow_book.png"></c:image>
			<c:button class="btn btn--green btn--half" link-to-url="/wxaService/customerBorrowHistory/">查看借阅详情</c:button>
		</c:column>
		
		<c:column name="book-expired" class="align-center borrow-book-page">
			<c:text>您有借阅的图书已超期</c:text>
			<c:text>不能借阅新的图书</c:text>
			<c:image class="can-not-borrow-image padding--top-far padding--bottom-far" src-url="/images/can_not_borrow_book.png"></c:image>
			<c:button class="btn btn--green btn--half" link-to-url="/wxaService/customerBorrowHistory/">查看借阅详情</c:button>
		</c:column>
		
		<c:column name="expired-unpaid" class="align-center borrow-book-page">
			<c:text>您有超期罚金未支付</c:text>
			<c:text>不能借阅新的图书</c:text>
			<c:image class="can-not-borrow-image padding--top-far padding--bottom-far" src-url="/images/can_not_borrow_book.png"></c:image>
			<c:button class="btn btn--green btn--half" link-to-url="/wxaService/customerBorrowHistory/">查看借阅详情</c:button>
		</c:column>
		
    </c:page>

	<!-- 首页：买书 -->
	<c:page name="customer-buy-book" title="买书">
        <c:container class="container-vertical align-center buy-book-page" >
        	<c:button type="scanner" name="buy-book" class="btn btn--green btn--half" link-to-url="/wxaService/customerBuyBook/">扫码购书</c:button>
        	<c:text name="bottom-line" class="text--color-info padding--far">点击上面按钮，然后请将要购买书籍的二维码放入框内，即可扫描购买</c:text>
        </c:container>
    </c:page>
    <!-- 首页：共享 -->
    <c:page name="book-sharing-form" title="共享图书">
		<c:data-source shop="$(store)"/>
		
		<c:column class="align-center empty-space-header-block">
			<c:text class="text-size-main">书香社区欢迎广大社区成员共享/捐赠图书，您可以将您要共享/捐赠的图书送到您身边的【书香社区门店】，如果需要上门取件，请填写下面表单，我们将尽快与您联系。</c:text>
		</c:column>
		<c:container class="container--empty"/>
		
    	<c:column>
    		<c:form name="share-book">
    			<c:field name="storeId" type="hidden" label="店ID" data-source="$(shop.id)"/>
    			<c:field name="quantityLevel" label="共享数量" type="select" placeholder="请选择数量级别" content="little">
    				<c:option value="little" display-text="少于10本" checked="true"/>
    				<c:option value="many" display-text="超过10本"/>
    			</c:field>
    			<c:field name="contactName" label="联系人" type="text" required="true" placeholder="请输入取件联系人" min-value="1" max-value="20" />
    			<c:field name="contactMobile" label="联系电话" type="text" required="true" placeholder="请输入取件联系人的电话" min-value="11" max-value="11"/>
    			<c:field name="contactAddress" label="联系地址" type="text" placeholder="请输入您的取件地址" min-value="1" max-value="100" max-line="2"/>
    			<c:row class="text-size-note align-center user-agreement">
    					<c:field type="check_box" name="agreed" label="">
    						<c:option value="true" display-text="我同意"/>
    					</c:field>
    					<c:text link-to-url="/wxaService/bookSharingAgreement/">《书香社区共享图书条款》</c:text>
    			</c:row>
    			<c:action name="submitBookShareForm" class="btn btn--green btn--full" link-to-url="/wxaService/shareBook/">提交</c:action>
    		</c:form>
    	</c:column>
    </c:page>
</root>
